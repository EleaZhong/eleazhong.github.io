{"version":3,"sources":["ShowImage.js","assets/amongus2.jpg","InputForm.js","App.js","index.js"],"names":["ShowImage","props","getBase64","url","axios","get","responseType","then","response","buf","Buffer","from","data","toString","setState","imagedata","state","bind","setInterval","console","log","generationID","undefined","style","width","this","Img","variant","src","height","placeholder","Body","Title","React","Component","InputForm","handlePromptChange","e","prompts","target","value","handleExtraOptionsChange","extraoptions","handleSubmit","preventDefault","stuff","yaml","load","replace","post","setGenerationID","catch","error","showmodal","handleClose","Modal","show","onHide","Form","onSubmit","Group","className","controlId","Label","Control","onChange","type","Text","as","rows","Button","App","newgenerationID","Container","fluid","Row","Col","xs","ReactDOM","render","document","getElementById"],"mappings":"oOAeMA,E,kDACJ,WAAYC,GAAO,IAAD,8BAChB,cAAMA,IAkBRC,UAAY,SAACC,GAOXC,IAAMC,IAAIF,EAAK,CACbG,aAAc,gBAEfC,MAAK,SAAAC,GAGJ,IAAIC,EAAMC,EAAOC,KAAKH,EAASI,KAAM,UAAUC,SAAS,UACxD,EAAKC,UAAS,WACZ,MAAO,CACLC,UAAWN,UAjCjB,EAAKO,MAAQ,CACXD,UAAW,IAEb,EAAKb,UAAY,EAAKA,UAAUe,KAAf,gBALD,E,qDAQlB,WAAoB,IAAD,OACjBC,aAAY,WACVC,QAAQC,IAAI,EAAKnB,MAAMoB,mBACMC,GAAzB,EAAKrB,MAAMoB,cACb,EAAKnB,UAAL,uCAA+C,EAAKD,MAAMoB,eAG5DF,QAAQC,IAAI,EAAKJ,MAAMD,aACtB,O,oBAyBL,WAEE,OACE,eAAC,IAAD,CAAMQ,MAAO,CAAEC,MAAO,SAAtB,UAEKC,KAAKxB,MAAMoB,aAAc,cAAC,IAAKK,IAAN,CAAWF,MAAM,OAAOG,QAAQ,MAAMC,IAAG,+CAA0CH,KAAKT,MAAMD,aAAgB,cAAC,IAAKW,IAAN,CAAWF,MAAM,MAAMK,OAAO,MAAMF,QAAQ,MAAMC,IAAKE,MAEjM,cAAC,IAAKC,KAAN,UACE,cAAC,IAAKC,MAAN,mC,GAlDcC,IAAMC,WAyDflC,Q,yDCxEA,QAA0B,sC,8PC+G1BmC,E,kDAhGb,WAAYlC,GAAO,IAAD,8BAChB,cAAMA,IAWRmC,mBAAqB,SAAAC,GACnB,EAAKvB,UAAS,WACZ,MAAO,CACLwB,QAASD,EAAEE,OAAOC,WAfN,EAoBlBC,yBAA2B,SAAAJ,GACzB,EAAKvB,UAAS,WACZ,MAAO,CACL4B,aAAcL,EAAEE,OAAOC,WAvBX,EA4BlBG,aAAe,SAACN,GACdA,EAAEO,iBACF,IAAIC,EAAQC,IAAKC,KAAK,EAAK/B,MAAM0B,aAAaM,QAAQ,OAAQ,KAC9DH,EAAK,QAAc,EAAK7B,MAAMsB,QAC9BnB,QAAQC,IAAIyB,QAEiBvB,GAAzB,EAAKrB,MAAMoB,cACbjB,IAAM6C,KAAK,kCAAmCJ,GAE7CtC,MAAK,SAAAC,GACJW,QAAQC,IAAIZ,GACZ,EAAKP,MAAMiD,gBAAgB1C,EAASI,SAErCuC,OAAM,SAAAC,GACLjC,QAAQC,IAAI,oBACZ,EAAKN,UAAS,WACZ,MAAO,CACLuC,WAAW,UA3CnB,EAAKrC,MAAQ,CACXsB,QAAS,gBACTI,aAAc,mBACdW,WAAW,GAEb,EAAKjB,mBAAqB,EAAKA,mBAAmBnB,KAAxB,gBAC1B,EAAKwB,yBAA2B,EAAKA,yBAAyBxB,KAA9B,gBAChC,EAAKqC,YAAc,EAAKA,YAAYrC,KAAjB,gBATH,E,+CAqDlB,WACEQ,KAAKX,UAAS,WACZ,MAAO,CACLuC,WAAW,Q,oBAKjB,WAAS,IAAD,OACN,OACE,qCACA,cAACE,EAAA,EAAD,CAAOC,KAAM/B,KAAKT,MAAMqC,UAAWI,OAAQ,kBAAI,EAAKH,eAApD,SACE,cAACC,EAAA,EAAMxB,KAAP,UACE,mDAKJ,eAAC2B,EAAA,EAAD,CAAMC,SAAUlC,KAAKkB,aAArB,UACE,eAACe,EAAA,EAAKE,MAAN,CAAYC,UAAU,OAAOC,UAAU,aAAvC,UACE,cAACJ,EAAA,EAAKK,MAAN,sBACA,cAACL,EAAA,EAAKM,QAAN,CAAcxB,MAAOf,KAAKT,MAAMsB,QAAS2B,SAAUxC,KAAKW,mBAAoB8B,KAAK,QAAQpC,YAAY,mBACrG,cAAC4B,EAAA,EAAKS,KAAN,CAAWN,UAAU,aAArB,kDAKF,eAACH,EAAA,EAAKE,MAAN,CAAYC,UAAU,OAAOC,UAAU,cAAvC,UACE,cAACJ,EAAA,EAAKK,MAAN,4BACA,cAACL,EAAA,EAAKM,QAAN,CAAcxB,MAAOf,KAAKT,MAAM0B,aAAcuB,SAAUxC,KAAKgB,yBAA0ByB,KAAK,QAAQE,GAAG,WAAWC,KAAM,EAAGvC,YAAY,uBAGzI,cAACwC,EAAA,EAAD,CAAS3C,QAAQ,UAAUuC,KAAK,SAAhC,8B,GAtFgBjC,IAAMC,W,QCmCfqC,E,kDAlCb,WAAYtE,GAAO,IAAD,8BAChB,cAAMA,IACDe,MAAQ,CACXK,aAAc,MAEhB,EAAK6B,gBAAkB,EAAKA,gBAAgBjC,KAArB,gBALP,E,mDAQlB,SAAgBuD,GACd/C,KAAKX,UAAS,WACZ,MAAO,CACLO,aAAcmD,Q,oBAKpB,WACE,OACE,cAACC,EAAA,EAAD,CAAWC,OAAK,EAACb,UAAU,QAA3B,SACE,eAACc,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKC,GAAI,IACT,cAACD,EAAA,EAAD,UACE,cAAC,EAAD,CAAWvD,aAAcI,KAAKT,MAAMK,aAAc6B,gBAAiBzB,KAAKyB,oBAE1E,cAAC0B,EAAA,EAAD,UACE,cAAC5E,EAAA,EAAD,CAAWqB,aAAcI,KAAKT,MAAMK,iBAEtC,cAACuD,EAAA,EAAD,CAAKC,GAAI,a,GA5BD5C,IAAMC,W,MCPxB4C,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.e0687dc2.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  Button,\n  Form,\n  Col,\n  Row,\n  Card,\n  Container\n  } from 'react-bootstrap';\nimport axios from \"axios\";\nimport placeholder from \"./assets/amongus2.jpg\"\nimport yaml from \"js-yaml\"\n\n\nclass ShowImage extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      imagedata: \"\",\n    }\n    this.getBase64 = this.getBase64.bind(this)\n  }\n\n  componentDidMount(){\n    setInterval(()=>{\n      console.log(this.props.generationID) \n      if (this.props.generationID!=undefined){\n        this.getBase64(`http://35.231.33.166/api/get/${this.props.generationID}`);\n        // this.getBase64(`http://127.0.0.1:5000/api/get/${this.props.generationID}`);\n      }\n      console.log(this.state.imagedata)\n    }, 10000);\n  }\n\n  getBase64 = (url) => {\n    // axios.get(url,{ responseType: 'blob',  withCredentials: true, headers: {\"Access-Control-Allow-Credentials\": 'true'} })\n    // .then(response => {\n    //   console.log(response);\n    //   console.log(response.data.headers);\n    // });\n\n    axios.get(url, {\n      responseType: 'arraybuffer'\n    })\n    .then(response => {\n      // console.log(response);\n      // console.log(response.data.headers);\n      let buf = Buffer.from(response.data, 'binary').toString('base64');\n      this.setState(()=>{\n        return {\n          imagedata: buf,\n        }\n      });\n    });\n  }\n\n  render(){\n\n    return (\n      <Card style={{ width: '28rem' }}>\n        {\n          (this.props.generationID)?<Card.Img  width='100%' variant=\"top\" src={`data:image/jpeg;charset=utf-8;base64,${this.state.imagedata}`} />:<Card.Img  width='500' height='200' variant=\"top\" src={placeholder} />\n        }\n        <Card.Body>\n          <Card.Title>Iters/Total</Card.Title>\n        </Card.Body>\n      </Card>\n    );\n  }\n} \n\nexport default ShowImage;\n","export default __webpack_public_path__ + \"static/media/amongus2.8a0ade26.jpg\";","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  Button,\n  Form,\n  Col,\n  Row,\n  Card,\n  Container,\n  Modal\n  } from 'react-bootstrap';\nimport axios from \"axios\";\nimport yaml from \"js-yaml\"\n\nclass InputForm extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      prompts: \"Sunset at Sea\",\n      extraoptions: \"quality: draft\\n\",\n      showmodal: false,\n    }\n    this.handlePromptChange = this.handlePromptChange.bind(this)\n    this.handleExtraOptionsChange = this.handleExtraOptionsChange.bind(this)\n    this.handleClose = this.handleClose.bind(this)\n  }\n\n  handlePromptChange = e => {\n    this.setState(()=>{\n      return {\n        prompts: e.target.value,\n      }\n    });\n  }\n\n  handleExtraOptionsChange = e => {\n    this.setState(()=>{\n      return {\n        extraoptions: e.target.value,\n      }\n    });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    let stuff = yaml.load(this.state.extraoptions.replace(/\\n*$/, \"\"))\n    stuff['prompts'] = this.state.prompts\n    console.log(stuff)\n\n    if (this.props.generationID==undefined) {\n      axios.post('http://35.231.33.166/api/submit', stuff)\n      // axios.post('http://127.0.0.1:5000/api/submit', stuff)\n      .then(response => {\n        console.log(response);\n        this.props.setGenerationID(response.data)\n      })\n      .catch(error => {\n        console.log(\"error success!!!\");\n        this.setState(()=>{\n          return {\n            showmodal: true,\n          }\n        })\n      })\n    }\n\n  }\n\n  handleClose() {\n    this.setState(()=>{\n      return {\n        showmodal: false,\n      }\n    })\n  }\n\n  render(){\n    return (\n      <>\n      <Modal show={this.state.showmodal} onHide={()=>this.handleClose()}>\n        <Modal.Body >\n          <h2>\n            sorry, failed\n          </h2>\n        </Modal.Body>\n      </Modal>\n      <Form onSubmit={this.handleSubmit} >\n        <Form.Group className=\"mb-3\" controlId=\"formPrompt\">\n          <Form.Label>Prompts</Form.Label>\n          <Form.Control value={this.state.prompts} onChange={this.handlePromptChange} type=\"input\" placeholder=\"Sunset at sea.\" />\n          <Form.Text className=\"text-muted\">\n            Write down the prompt to generate\n          </Form.Text>\n        </Form.Group>\n\n        <Form.Group className=\"mb-3\" controlId=\"formOptions\">\n          <Form.Label>Extra options</Form.Label>\n          <Form.Control value={this.state.extraoptions} onChange={this.handleExtraOptionsChange} type=\"input\" as=\"textarea\" rows={7} placeholder=\"quality: better\" />\n        </Form.Group>\n        \n        <Button  variant=\"primary\" type=\"submit\">\n          Submit\n        </Button>\n      </Form>\n      </>\n    );\n  }\n\n\n}\n\nexport default InputForm","import React from 'react';\nimport './App.css';\nimport {\n  Button,\n  Form,\n  Col,\n  Row,\n  Card,\n  Container\n  } from 'react-bootstrap';\nimport axios from \"axios\";\nimport InputForm from './InputForm';\nimport ShowImage from './ShowImage';\n\nclass App extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      generationID: null,\n    }\n    this.setGenerationID = this.setGenerationID.bind(this)\n  }\n\n  setGenerationID(newgenerationID){\n    this.setState(()=>{\n      return {\n        generationID: newgenerationID,\n      }\n    });\n  }\n\n  render(){\n    return (\n      <Container fluid className=\"padup\">\n        <Row>\n          <Col xs={1}/>\n          <Col>\n            <InputForm generationID={this.state.generationID} setGenerationID={this.setGenerationID}/>\n          </Col>\n          <Col>\n            <ShowImage generationID={this.state.generationID} />\n          </Col>\n          <Col xs={1}/>\n        </Row>\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}